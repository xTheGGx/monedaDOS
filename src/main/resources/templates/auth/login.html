<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es" class="light">
<head th:replace="~{fragments/layout :: headFrag('Iniciar sesión')}"></head>
<body>
<div th:replace="~{fragments/layout :: navbar('none')}"></div>

<main id="main" class="site-main">
    <div class="container">
        <section class="login-header" aria-labelledby="login-title">
            <h1 id="login-title">Inicia sesión</h1>
            <p>Accede a tu panel para administrar tus finanzas.</p>
        </section>

        <section class="auth card" aria-label="Formulario de inicio de sesión">
            <form th:action="@{/auth/login}" method="post" class="login-form">
                <!-- CSRF -->
                <input th:if="${_csrf != null}" type="hidden"
                       th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                <div class="form-group">
                    <label for="username">Usuario o email</label>
                    <div class="input-with-icon">
                        <span class="material-symbols-outlined">mail</span>
                        <input id="username" name="email" type="text"
                               class="form-input" placeholder="tu@correo.com" required/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <div class="input-with-icon">
                        <span class="material-symbols-outlined">lock</span>
                        <input id="password" name="contrasena" type="password"
                               class="form-input" placeholder="••••••••" required/>
                    </div>
                </div>

                <button class="button-primary" type="submit">Entrar</button>

                <p class="form-msg error" th:if="${param.error}">Credenciales inválidas.</p>
                <p class="form-msg success" th:if="${param.logout}">Sesión cerrada correctamente.</p>
                <p class="form-msg success" th:if="${param.registered}">Registro exitoso. Inicia sesión.</p>
            </form>

        </section>

        <div class="login-footer">
            <p>¿No tienes cuenta? <a th:href="@{/register}">Regístrate</a></p>
        </div>
    </div>
</main>

<div th:replace="~{fragments/layout :: footer}"></div>
<script th:src="@{/js/scripts.js}" defer></script>
</body>
</html>
